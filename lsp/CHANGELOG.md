# Chen Lang LSP 更新日志

## [0.2.0] - 2026-01-04

### 新增功能 ✨

#### 1. 实时语法诊断

- 集成 chen_lang 解析器进行语法检查
- 打开文件时自动检测错误
- 编辑时实时更新诊断信息
- 显示详细的错误位置和消息

#### 2. 跳转到定义 (Go to Definition)

- 支持函数定义跳转
- 支持变量声明跳转
- 精确定位到符号定义位置
- 兼容所有主流编辑器

#### 3. 查找引用 (Find References)

- 查找符号的所有使用位置
- 智能词边界检测
- 避免部分匹配
- 显示完整的引用列表

#### 4. 重命名符号 (Rename Symbol)

- 智能重命名变量和函数
- 自动更新所有引用
- 保持代码一致性
- 支持撤销操作

### 改进 🔧

- 优化文档同步性能
- 改进符号提取算法
- 增强错误消息的可读性
- 更新所有文档和示例

### 技术细节 📋

**新增文件:**

- `FEATURES.md` - 详细功能使用指南
- `test_features.ch` - 功能测试文件
- `CHANGELOG.md` - 更新日志

**修改文件:**

- `src/server.rs` - 添加新的 LSP 方法实现
- `src/bin.rs` - 修复导入和初始化问题
- `README.md` - 更新功能列表
- `DEV.md` - 更新开发状态

**新增方法:**

- `analyze()` - 语法分析和诊断
- `collect_symbols()` - 收集符号信息
- `find_references()` - 查找符号引用
- `goto_definition()` - 跳转到定义
- `references()` - 引用查询
- `rename()` - 符号重命名

### 已知问题 🐛

1. 当前只支持单文件内的引用查找
2. 使用简单的文本匹配，可能在复杂情况下不够精确
3. 不区分不同作用域的同名变量

### 下一步计划 🚀

- [ ] 实现跨文件引用和跳转
- [ ] 添加更精确的语义分析
- [ ] 实现代码格式化
- [ ] 添加代码片段支持
- [ ] 实现语义高亮
- [ ] 添加代码折叠功能

---

## [0.1.0] - 2025-12-XX

### 初始版本

#### 基础功能

- 文档同步 (did_open, did_change, did_close)
- 关键字补全
- 悬停提示
- 文档符号提取
- 增量文档更新

#### 编辑器支持

- VS Code 配置
- Neovim 配置
- Helix 配置
- Vim 配置
- Emacs 配置

#### 文档

- README.md - 基本说明
- USAGE.md - 使用指南
- DEV.md - 开发指南
- SYNTAX_HIGHLIGHTING.md - 语法高亮配置

---

## 版本说明

版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范：

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正
